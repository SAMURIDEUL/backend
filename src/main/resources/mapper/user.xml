<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.samuL.mapper.UserMapper">
    <!--회원가입-->
    <insert id="signupUser" parameterType="com.example.samuL.dto.UserDto">
        insert into users
        values( #{id},
        #{email},
        #{password_hash},
        #{nickname},
        #{created_at},
        #{updated_at})
    </insert>
    <!-- 이메일 중복 확인 -->
    <select id="countEmail" resultType="int">
        select count(*)
        from users
        where email = #{email}
    </select>

    <!-- 닉네임 중복 확인 -->
    <select id = "countNickname" resultType="int">
        select count(*)
        from users
        where nickname = #{nickname}
    </select>

    <!-- 로그인 시 이메일 확인 -->
    <select id = "findByEmail" parameterType="com.example.samuL.dto.UserDto">
        select *
        from users
        where email = #{email}
    </select>

    <!-- 회원 탈퇴 -->
    <delete id = "deleteUser" parameterType="String">
        delete
        from users
        where email = #{email}
    </delete>

    <!-- 회원정보 수정 -->
    <update id = "updateUser" parameterType="com.example.samuL.dto.UserDto">
        update users
        set
            nickname = #{nickname}
            updated_at = #{updated_at}
        where email = #{email}
    </update>

</mapper>
